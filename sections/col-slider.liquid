{{ 'col-slider.css' | asset_url | stylesheet_tag }}

<script>
  
  
  function changeProducts(e){
    let collection = e["collection"]
    console.log("collection-->", collection)
    document.querySelectorAll(`div.slick-slide:not(.slick-cloned):has([collection="${collection}"])`)
      .forEach(elem=> elem.classList.remove('hidden'))
    document.querySelectorAll(`div.slick-slide:not(.slick-cloned):not(:has([collection="${collection}"]))`)
      .forEach(elem=> elem.classList.add('hidden'))
  }


</script>

<div class="collection-labels">
  {% for block in section.blocks %}
    {% assign collection = block.settings.collection %}
    <input
      type="radio"
      id="{{ collection.title }}"
      name="collection"
      value="{{ collection.title }}"
      style="display:none;"
      {% if forloop.first %}
        checked
      {% endif %}
      onChange="changeProducts(this)"
    >
    <label for="{{ collection.title }}">{{ collection.title }}</label>
  {% endfor %}
</div>
<div class="dawn-product-slider mx-auto">
  {% for block in section.blocks %}
    {% assign collection = block.settings.collection %}
    {%- for product in collections[block.settings.collection].products -%}
      <div class="carousel-cell" collection="{{ collection.title }}">
        <img
          class="card-img-top"
          src="{{ product.featured_image.src | img_url: "large" }}"
          alt="{{ product.featured_image.alt | escape }}"
        >
        <div class="card-body">
          <div class="row">
            <div class="card-name">
              <h5 class="card-title" style="margin-top:1rem;font-size: 17px;">{{ product.title }}</h5>
            </div>
          </div>
          <div class="row" style="height: 40px;">
            <div class="card-cart">
              <a href="#globo-formbuilder-89615" class="btn-contactar-vendedor">CONTACTAR VENDEDOR</a>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  {% endfor %}
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.js"></script>
<script>
  $('.dawn-product-slider').slick({
    infinite: true,
    slidesToShow: 3,
    slidesToScroll: 1,
    autoplay: true,
    autoplaySpeed: 2000,
    prevArrow: '<svg class="slick-prev" xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 44.567 44.567"><g id="Grupo_95" data-name="Grupo 95" ><line id="Línea_35" data-name="Línea 35" x2="25.801" transform="translate(11.397 21.909)" fill="none" stroke="#ACA9A0" stroke-width="1"/><path id="Trazado_408" data-name="Trazado 408" d="M174.36,3951l-14-10.04s14.386-10.8,14.386-11.094" transform="translate(-149.448 -3919.048)" fill="none" stroke="#ACA9A0" stroke-width="1"/><circle id="Elipse_105" data-name="Elipse 105" cx="21.784" cy="21.784" r="21.784" fill="none" stroke="#ACA9A0" stroke-width="1"/></g></svg>',
    nextArrow: '<svg class="slick-next" xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 44.567 44.567"><g id="Grupo_94" data-name="Grupo 94" transform="translate(44.067 44.067) rotate(180)"><line id="Línea_35" data-name="Línea 35" x2="25.801" transform="translate(11.397 21.909)" fill="none" stroke="#ACA9A0" stroke-width="1"/><path id="Trazado_408" data-name="Trazado 408" d="M174.36,3951l-14-10.04s14.386-10.8,14.386-11.094" transform="translate(-149.448 -3919.048)" fill="none" stroke="#ACA9A0" stroke-width="1"/><circle id="Elipse_105" data-name="Elipse 105" cx="21.784" cy="21.784" r="21.784" fill="none" stroke="#ACA9A0" stroke-width="1"/></g></svg>',
    arrows: true,
      responsive: [
      {
        breakpoint: 1024,
        settings: {
          slidesToShow: 2,
          slidesToScroll: 1,
        }
      },
      {
        breakpoint: 600,
        settings: {
          slidesToShow: 1,
          slidesToScroll: 1
        }
      },
      {
        breakpoint: 480,
        settings: {
          slidesToShow: 1,
          slidesToScroll: 1
        }
      }

    ]
  });
</script>
{% schema %}
{
  "name": "Collection slider",
  "settings": [
    {
      "type": "range",
      "id": "navigation_amount",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "Change the number of cards in view"
    },
    {
      "type": "color",
      "id": "navigation_color",
      "label": "Change color of the pagination|navigation|scrollbar"
    },
    {
      "type": "text",
      "id": "title",
      "default": "Collection slider",
      "label": "t:sections.featured-collection.settings.title.label"
    },
    {
      "type": "text",
      "id": "subtitle",
      "default": "Collection slider",
      "label": "t:sections.featured-collection.settings.subtitle.label"
    }
  ] ,
  "blocks": [
    {
       "type": "collection",
       "name": "Collection",
       "settings": [
          {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
          }

       ]
    }
 ],
  "presets": [
    {
      "name": "Collection slider",
      "category":"Custom"
    }
  ]
}
{% endschema %}
